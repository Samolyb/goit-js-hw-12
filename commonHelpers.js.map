{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43864009-cebb341532060e679edcf3c4c';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15\n        }\n    });\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const listImg = document.querySelector('.list');\nlet lightbox;\n\nexport function clearGallery(gallery) {\n    gallery.innerHTML = '';\n}\n\nexport function renderImages(images, gallery) {\n    const imageElements = images.map(image => {\n        return `\n      <li class=\"item-list\">\n        <a href=\"${image.largeImageURL}\" class=\"item-list-link\">\n            <img class=\"item-list-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n        </a>\n        <div class='markup-info'>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Likes</h3>\n                <p class=\"item-list-text\">${image.likes}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Views</h3>\n                <p class=\"item-list-text\">${image.views}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Comments</h3>\n                <p class=\"item-list-text\">${image.comments}</p>\n            </div>\n            <div class=\"item-list-info-text\">\n                <h3 class=\"item-list-title\">Downloads</h3>\n                <p class=\"item-list-text\">${image.downloads}</p>\n            </div>\n        </div>\n      </li>\n    `;\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', imageElements);\n\n    lightbox = new SimpleLightbox('.item-list-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        overlayOpacity: 0.8,\n    });\n\n    lightbox.refresh();\n}\n\nexport function toggleLoadMoreButton(button, show) {\n    button.style.display = show ? 'block' : 'none';\n}\n\nexport function showLoader(loader, show) {\n    loader.style.display = show ? 'block' : 'none';\n}\n\nexport function showEndOfResultsMessage() {\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topCenter'\n    });\n}\n\nexport function showToastError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topCenter'\n    });\n}\n\nexport function scrollPage(gallery) {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { clearGallery, renderImages, toggleLoadMoreButton, showLoader, showEndOfResultsMessage, showToastError, scrollPage } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 100;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    query = searchInput.value.trim();\n    if (query === '') {\n        showToastError('Please enter a search term');\n        return;\n    }\n\n    page = 1;\n    totalHits = 0;\n    clearGallery(gallery);\n    toggleLoadMoreButton(loadMoreButton, false);\n    await fetchAndRenderImages();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page++;\n    await fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n    showLoader(loader, true);\n    try {\n        const data = await fetchImages(query, page);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0 && page === 1) {\n            showToastError('Sorry, there are no images matching your search query. Please try again!');\n            return;\n        }\n\n        renderImages(data.hits, gallery);\n\n        if (page * 15 >= totalHits) {\n            toggleLoadMoreButton(loadMoreButton, false);\n            showEndOfResultsMessage();\n        } else {\n            toggleLoadMoreButton(loadMoreButton, true);\n        }\n\n        if (page > 1) {\n            scrollPage(gallery);\n        }\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        showToastError('An error occurred while fetching data. Please try again later.');\n    } finally {\n        showLoader(loader, false);\n    }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","lightbox","clearGallery","gallery","renderImages","images","imageElements","image","SimpleLightbox","toggleLoadMoreButton","button","show","showLoader","loader","showEndOfResultsMessage","iziToast","showToastError","message","scrollPage","cardHeight","searchForm","searchInput","loadMoreButton","totalHits","event","fetchAndRenderImages","data","error"],"mappings":"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"}